{% extends 'base_admin.html' %}
{% block main_content %}
  <div class="container">
    <div class="container">
      <form class="form-inline" method="post" style="display: inline-block;">
        <div class="row align-items-start">
          <div class="col mx-0 px-0">{{ add_ship_form.hidden_tag() }}</div>
          <div class="col mx-0 px-0">{{ add_ship_form.x(max=(board.n - 1) , id = "xValue")}}</div>
          <div class="col mx-0 px-0">{{ add_ship_form.y(max=(board.n - 1) , id = "yValue")}}</div>
          <div class="col mx-0 px-0">{{ add_ship_form.prize() }}</div>
          <div class="col mx-0 px-0">{{ add_ship_form.submit() }}</div>
        </div>
      </form>

    </div>
    <div class="accordion" id="accordionPanelsStayOpenExample">
        <div class="accordion-item">
        <h2 class="accordion-header" id="panelsStayOpen-heading">
          <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapse" aria-expanded="true" aria-controls="panelsStayOpen-collapse">Пользователи</button>
        </h2>
          <div id="panelsStayOpen-collapse" class="accordion-collapse collapse show" aria-labelledby="panelsStayOpen-heading">
          <div class="accordion-body bg-dark text-white">
      {% for user in users %}


            <p>Имя пользователя: {{ user.login }}</p>
            <a data-id="{{ user.id }}" id="{{ user.id }}" href = "{{url_for('board.add_user',board_id = board.id,user_id = user.id )}}" class="btn btn-secondary" >Добавить пользователя</a>

      {% endfor %}

          </div>
        </div>
      </div>
    </div>
    {%for user in user_on_board%}
      <p>{{user.login}}</p>
    {%endfor%}
    <h2>Игровое поле</h2>
    <table class="table table-bordered border-dark">
      <thead>
        <tr>
          <th></th>
          {% for i in range(size) %}
          <th>{{ i+1 }}</th>
          {% endfor %}
        </tr>
      </thead>
      <tbody>
        {% for y in range(size) %}
        <tr>
          <th>{{ y+1 }}</th>
          {% for x in range(size) %}
          <td>
            <button class="btn btn-outline-dark" data-positionx="{{ x }}" data-positiony="{{ y }}" id="{{ x+1 }}{{ y }}" onclick="fillFields('{{ x+1 }}{{ y }}')">
              {% if board_render[y][x] == "#" %}
              <div class="contant"><img src="https://sergeychikin.ru/365/028-transport/sea/cruiser.svg" alt="карабликкк">
<button class="btn btn-outline-dark contant" data-positionx="{{ x }}" data-positiony="{{ y }}" id="{{ x+1 }}{{ y }}" onclick="fillFields('{{ x+1 }}{{ y }}')">
              <img></div>

              {%endif%}
            </button>

          </td>
          {% endfor %}
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
<style>
  .contant{
  background: url(https://sergeychikin.ru/365/028-transport/sea/cruiser.svg);
  width: 10%;
  height: 10%;
  }
  body{
    background: linear-gradient(to bottom right, #87CEFA, #20B2AA);
  }

</style>
  <script>
    function fillFields(cid) {
      var button = document.getElementById(cid);
      var input_x = document.getElementById("xValue");
      var input_y = document.getElementById("yValue");
      input_y.value = button.getAttribute('data-positiony');
      input_x.value = button.getAttribute('data-positionx');
    }
  </script>

{% endblock %}
