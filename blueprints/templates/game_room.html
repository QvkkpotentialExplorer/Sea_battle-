 {% extends 'base_admin.html' %}
{% block main_content %}
<div class="backk">
    <div class="row justify-content-center" style="background-color: none;">
        <h1 class="text-white text-center my-5">Игровое поле</h1>
        <div class="col-4">
            <div class="col-6">
                <form class="form-inline" method="post" style="display: inline-block;">
                    <div class="row align-items-start">
                        <div class="col-12 mx-0 px-0 ">{{ add_ship_form.hidden_tag() }}</div>
                        <div class="col-12">{{ add_ship_form.x(class="input-group-text my-2", style="width: 100%;", max=(board.n - 1) , id = "xValue")}}</div>
                        <div class="col-12" >{{ add_ship_form.y(class="input-group-text my-2", style="width: 100%;", max=(board.n - 1) , id = "yValue")}}</div>
                        <div class="col-12" >{{ add_ship_form.prize(class="input-group-text my-2",style="width: 100%;") }}</div>
                        <div class="col-12" >{{ add_ship_form.submit(class="input-group-text my-2", style="width: 100%;",) }}</div>
                    </div>
                </form>

            </div>
            <div class="col-6 my-3 ">
                <div class="accordion" id="accordionPanelsStayOpenExample">
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="panelsStayOpen-heading">
                            <button class="accordion-button text-dark" type="button" data-bs-toggle="collapse"
                                    data-bs-target="#panelsStayOpen-collapse" aria-expanded="true"
                                    aria-controls="panelsStayOpen-collapse">Пользователи
                            </button>
                        </h2>
                        <div id="panelsStayOpen-collapse" class="accordion-collapse collapse show"
                             aria-labelledby="panelsStayOpen-heading">
                            <div class="accordion-body bg-dark text-white">

                                {% for user in users %}

                                <p class="text-white">Имя пользователя: {{ user.login }}</p>
                                <a data-id="{{ user.id }}" id="{{ user.id }}"
                                   href="{{url_for('board.add_user',board_id = board.id,user_id = user.id )}}"
                                   class="btn btn-sm btn-secondary">Добавить пользователя</a>

                                {% endfor %}

                            </div>
                        </div>
                    </div>
                </div>
            </div>

            {%for user in user_on_board%}
            <p class="text-white">{{user.user_id}}</p>
            {%endfor%}

        </div>

        <div class=" col-8 justify-content-center" style="overflow:auto;overflow-y:auto;">

            <table class="table table-bordered border-dark bg-light" style="width:calc(35px*{{size+1}});">
                <thead>
                <tr>
                    <th style="width: 35px; height: 35px;  background: #e8ecef;"></th>
                    {% for i in range(size) %}
                    <th class="text-dark" style="width: 35px; height: 35px;  background: #e8ecef;">{{ i+1 }}</th>
                    {% endfor %}
                </tr>
                </thead>
                <tbody>
                {% for y in range(size) %}
                <tr class="text-dark bg-light" style="width: 35px; height: 35px; background: #e8ecef;">
                    <th style="width: 35px; height: 35px;  background: #e8ecef;">{{ y+1 }}</th>
                    {% for x in range(size) %}
                    <td>
                        {% if board_render[y][x] == "." %}
                        <button class="btn" style="width: 35px; height: 35px;  background: #e8ecef;" data-positionx="{{ x }}"
                                data-positiony="{{ y }}" id="{{ x+1 }}{{ y }}" onclick="fillFields('{{ x+1 }}{{ y }}')">
                            {%endif%}
                            {% if board_render[y][x] == "#" %}
                            <button class="btn btn contant" style="width: 35px; height: 35px;"
                                    data-positionx="{{ x }}" data-positiony="{{ y }}" id="{{ x+1 }}{{ y }}"
                                    onclick="fillFields('{{ x+1 }}{{ y }}')">


                                {%endif%}
                            </button>

                    </td>
                    {% endfor %}
                </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>

    </div>
</div>
<style>
    tr{
     background: #e8ecef;
     }
  .contant{
  background: url(https://sergeychikin.ru/365/150-clothes/sneakers.svg);
  background-size: cover;
  background-position: center center;
  }
  .contant:hover{
  border-color: rgba(255, 0, 0, 255);
	border-width: 5px;
	}
  body{
    background-size: cover;
  background-position: center center;
  }

  .btn:hover {
  background-size: cover;
  background-position: center center;
	border-color: rgba(255, 0, 0, 255);
	border-width: 5px;
}
</style>
<script>
    function fillFields(cid) {
      var button = document.getElementById(cid);
      var input_x = document.getElementById("xValue");
      var input_y = document.getElementById("yValue");
      input_y.value = button.getAttribute('data-positiony');
      input_x.value = button.getAttribute('data-positionx');
    }



</script>

{% endblock %}
